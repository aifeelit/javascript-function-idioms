<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title></title>

  <link rel="stylesheet" href="./css/reset.css" type="text/css"/>
  <link rel="stylesheet" href="./css/showoff.css" type="text/css"/>

  <script type="text/javascript" src="./js/jquery-1.4.min.js"></script>
  <script type="text/javascript" src="./js/jquery.cycle.all.js"></script>
	<script type="text/javascript" src="./js/jquery-print.js"></script>
  <script type="text/javascript" src="./js/jquery.batchImageLoad.js"></script>

  <script type="text/javascript" src="./js/jquery.doubletap-0.1.js"></script>

  <script type="text/javascript" src="./js/fg.menu.js"></script>
  <script type="text/javascript" src="./js/showoff.js"></script>
  <script type="text/javascript" src="./js/jTypeWriter.js"> </script>
  <script type="text/javascript" src="./js/sh_main.min.js"></script>
  <script type="text/javascript" src="./js/core.js"></script>
  <script type="text/javascript" src="./js/showoffcore.js"></script>

  <link type="text/css" href="./css/fg.menu.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/theme/ui.all.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/sh_style.css" rel="stylesheet" >

  
    <link rel="stylesheet" href="file/something.css" type="text/css"/>
  

  

  <script type="text/javascript">
  $(function(){
    setupPreso(false, '.');
  });
  </script>
</head>

<body>


<a tabindex="0" href="#search-engines" class="fg-button fg-button-icon-right ui-widget ui-state-default ui-corner-all" id="navmenu"><span class="ui-icon ui-icon-triangle-1-s"></span>slides</a>
<div id="navigation" class="hidden"></div>

<div id="help">
  <table>
    <tr><td class="key">space, &rarr;</td><td>next slide</td></tr>
    <tr><td class="key">&larr;</td><td>previous slide</td></tr>
    <tr><td class="key">d</td><td>debug mode</td></tr>
    <tr><td class="key">## &lt;ret&gt;</td><td>go to slide #</td></tr>
    <tr><td class="key">c</td><td>table of contents (vi)</td></tr>
    <tr><td class="key">f</td><td>toggle footer</td></tr>
    <tr><td class="key">r</td><td>reload slides</td></tr>
    <tr><td class="key">z</td><td>toggle help (this)</td></tr>
  </table>
</div>

<div id="preso">loading presentation...</div>
<div id="footer">
  <span id="slideInfo"></span>
  <span id="debugInfo"></span>
</div>

<div id="slides" class="offscreen" style="display:none;">
<div class="slide" data-transition="none"><div class="content bullets incremental" ref="encapsulation/slidesA_title/1">
<p class="notes">first slide</p>

<h1>JavaScript Functions : The Good Parts - Idioms for Encapsulation and Inheritance</h1>

<ul>
<li>or</li>
<li>A Thinly-Veiled Ripoff of <a href="http://www.crockford.com/">Douglas Crockford's</a> <u>JavaScript: The Good Parts</u> Chapters 4 and 5</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets" ref="encapsulation/slidesA_title/2">
<h1>One-Slide Intro</h1>

<ul>
<li>Pretty much anything interesting in JavaScript happens with functions</li>
<li>Functions are the <em>only</em> way to have nested scope</li>
<li>Constructor functions (with 'new' operator) are the <em>only</em> way to set an object's prototype</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="encapsulation/slidesB_objects/1">
<h1>Whirlwind Overview - Objects</h1></div>
</div><div class="slide" data-transition="none"><div class="content" ref="encapsulation/slidesB_objects/2">
<p class="notes">When a function is a property of an object it is called a 'method'</p>

<h1>Let's make an object</h1>

<pre class="sh_javaScript"><code>var COINS = new Object();
COINS.nickel = 5;
COINS.dime = 10;
COINS.quarter = 25;
COINS.isCoin = function(cents){
    return [this.NICKEL, this.DIME,
     this.QUARTER].contains(cents);
};</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="encapsulation/slidesB_objects/3">
<h1>Let's make an object - JSON</h1>

<pre class="sh_javaScript"><code>var COINS = {
    NICKEL : 5,
    DIME : 10,
    QUARTER : 25,
    isCoin : function(cents){
        return [this.NICKEL, this.DIME,
         this.QUARTER].contains(cents);
    }
};</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="encapsulation/slidesB_objects/4">
<p class="notes">JS objects are associative arrays - name-&gt;value pairs
.notes accessing property using dot "." notation = refinement</p>

<h1>Accessing object properties</h1>

<pre class="sh_javaScript"><code>var COINS = {
    NICKEL : 5,
    DIME : 10,
    QUARTER : 25,
    isCoin : function(cents){
        return [this.NICKEL, this.DIME,
         this.QUARTER].contains(cents);
    }
};

result = COINS.NICKEL;</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="encapsulation/slidesB_objects/5">
<h1>Accessing object properties</h1>

<p class="notes">accessing property using brackets [] with String literal</p>

<pre class="sh_javaScript"><code>var COINS = {
    NICKEL : 5,
    DIME : 10,
    QUARTER : 25,
    isCoin : function(cents){
        return [this.NICKEL, this.DIME,
         this.QUARTER].contains(cents);
    }
};

result = COINS["NICKEL"];</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="encapsulation/slidesB_objects/6">
<h1>Iterating an object's properties</h1>

<p class="notes">'for in' loop</p>

<pre class="sh_javaScript"><code>var COINS = {
    NICKEL : 5,
    DIME : 10,
    QUARTER : 25,
    isCoin : function(cents){
        return [this.NICKEL, this.DIME,
         this.QUARTER].contains(cents);
    }
};
for (var name in COINS){
    CORE.out(name + ':' + COINS[name]);
}</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="encapsulation/slidesB_objects/7">
<h2>Cleaner Iteration - hasOwnProperty() and typeof</h2>

<p class="notes">'for in' loop using 'hasOwnProperty' built-in function, and filtering out functions</p>

<pre class="sh_javaScript"><code>var COINS = {
    NICKEL : 5,
    DIME : 10,
    QUARTER : 25,
    isCoin : function(cents){
        return [this.NICKEL, this.DIME,
         this.QUARTER].contains(cents);
    }
};
for (var name in COINS){
    if (COINS.hasOwnProperty(name)
     &amp;&amp; typeof COINS[name] !== 'function'){
        CORE.out(name + ':' + COINS[name]);
    }
}</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="encapsulation/slidesC_functions/1">
<h1>Functions</h1></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="encapsulation/slidesC_functions/2">
<h1>Function Statement</h1>

<pre class="sh_javaScript"><code>var coinReturn = [25, 25, 10];
var coins = [];

function isSufficientFunds(purchasePrice){
    var funds = 0;
    coinReturn.each(function(coin){
        funds+=coin;
    });
    return (funds &gt;= purchasePrice);
}

result = isSufficientFunds(60);</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="encapsulation/slidesC_functions/3">
<h1>Function Expression</h1>

<p class="notes">function expression can be used anywhere that an expression is expected.
.notes Note the anonymous function expression parameter to the .each() method</p>

<pre class="sh_javaScript"><code>var coinReturn = [10, 5, 25];
var coins = [];

var isSufficientFunds = function(purPrice){
    var funds = 0;
    coinReturn.each(function(coin){
        funds+=coin;
    });
    return (funds &gt;= purPrice);
};

result = isSufficientFunds(75);</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="encapsulation/slidesC_functions/4">
<p class="notes">functions are objects, so they can have their own properties (including other functions!)</p>

<h1>Functions are objects, too</h1>

<pre class="sh_javaScript"><code>var foo = function(){return false;};
foo.bar = function(){return true;};
foo.baz = 3;

result = foo();</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="encapsulation/slidesC_functions/5">
<h1>Functions are objects, too</h1>

<pre class="sh_javaScript"><code>var foo = function(){return false;};
foo.bar = function(){return true;};
foo.baz = 3;

result = foo.bar();</code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content" ref="encapsulation/slidesC_functions/6">
<p class="notes">excerpt from my own unit test runner
.notes example of passing functions as parameters</p>

<pre class="sh_javaScript"><code>var runTestsRecursive = function(tests){
    for (var prop in tests){
        var aTest = tests[prop];
        if (typeof aTest === 'function'){
            attemptTest(aTest);
        } else if (typeof aTest === 'object'){
            runTestsRecursive(aTest);
        }
    }
};
var attemptTest = function(testFunction){
    try {
        testFunction();
    } catch (e) {
        //...some stuff
    }
};</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="encapsulation/slidesD_functionInvocationPatterns/1">
<h1>Function Invocation Patterns</h1></div>
</div><div class="slide" data-transition="fade"><div class="content" ref="encapsulation/slidesD_functionInvocationPatterns/2">
<p class="notes">'this' keyword a lot different in JavaScript than in Java</p>

<h1>What is 'this'?</h1>

<pre class="sh_javaScript"><code>function(){
    return this.foo;
}</code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content bullets left" ref="encapsulation/slidesD_functionInvocationPatterns/3">
<p class="notes">it turns out, the object bound to 'this' keyword depends on how the function is invoked</p>

<h1>Four function invocation patterns</h1>

<ul>
<li>function</li>
<li>method</li>
<li>constructor</li>
<li>apply</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="encapsulation/slidesD_functionInvocationPatterns/4">
<h1>'this' detector function</h1>

<pre class="sh_javaScript"><code>var thisDetector = function (){
    if (this === thisDetector){
        result = '\'this\' is me!';
    } else {
        result = '\'this\' is ' + this;
    }
};</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="encapsulation/slidesD_functionInvocationPatterns/5">
<p class="notes">what do you think will be outputted?</p>

<h1>Method invocation pattern</h1>

<pre class="sh_javaScript"><code>var thisDetector = function (){
    if (this === thisDetector){
        result = '\'this\' is me!';
    } else {
        result = '\'this\' is ' + this;
    }
};
var testObject = {
    testMe:thisDetector,
    toString:function(){return "testObject"}
};
testObject.testMe();</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="encapsulation/slidesD_functionInvocationPatterns/6">
<p class="notes">'object Window' is the global object in the browser</p>

<h1>Function invocation pattern</h1>

<pre class="sh_javaScript"><code>var thisDetector = function (){
    if (this === thisDetector){
        result = '\'this\' is me!';
    } else {
        result = '\'this\' is ' + this;
    }
};
thisDetector();</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="encapsulation/slidesD_functionInvocationPatterns/7">
<h1>Constructor invocation pattern</h1>

<p class="notes">we will cover prototype in more detail later
.notes this pattern is typified by the use of the 'new' keyword</p>

<pre class="sh_javaScript"><code>var thisDetector = function (){
    if (this === thisDetector){
        result = '\'this\' is me!';
    } else {
        result = '\'this\' is ' + this;
    }
};
thisDetector.prototype.toString = function(){
    return "newly constructed object";
};
new thisDetector();</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="encapsulation/slidesD_functionInvocationPatterns/8">
<p class="notes">there are always two implicit hidden additional parameters in a function invocation: context for 'this, and arguments array
.notes 'apply()' method allows making these additional parameters explicit</p>

<h1>'apply()' invocation pattern</h1>

<p class="notes">'apply' is a method available to functions (functions are objects)
.notes so, we're calling a method on a function which invokes it, rather than directly invoking the function</p>

<pre class="sh_javaScript"><code>var thisDetector = function (){
    if (this === thisDetector){
        result = '\'this\' is me!';
    } else {
        result = '\'this\' is ' + this;
    }
};

thisDetector.apply(thisDetector, []);</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="encapsulation/slidesD_functionInvocationPatterns/9">
<h1>Apply different context</h1>

<pre class="sh_javaScript"><code>var thisDetector = function (){
    if (this === thisDetector){
        result = '\'this\' is me!';
    } else {
        result = '\'this\' is ' + this;
    }
};

thisDetector.apply(
  {toString:function(){return 'foo';}}, []);</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="encapsulation/slidesD_functionInvocationPatterns/10">
<p class="notes">example of specifying arguments - note there are no args in signature, but function sees three args anyway!</p>

<h1>'apply()' with arguments</h1>

<pre class="sh_javaScript"><code>var thisDetector = function (){
    result = arguments.length;
};

thisDetector.apply({}, [false, 3, {}]);</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="encapsulation/slidesE_encapsulation/1">
<h1>Encapsulation Idioms</h1></div>
</div><div class="slide" data-transition="fade"><div class="content bullets incremental" ref="encapsulation/slidesE_encapsulation/2">
<p class="notes">blah</p>

<h1>Why Encapsulation?</h1>

<ul>
<li>No linker, only a single global object</li>
<li>No native namespacing or visibility modifiers</li>
<li>Anything can modify most anything</li>
</ul>
</div>
</div><div class="slide" data-transition="scrollUp"><div class="content small" ref="encapsulation/slidesE_encapsulation/3">
<p class="notes">typical HTML, many imports</p>

<pre class="sh_HTML"><code>&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8"/&gt;
&lt;title&gt;foo&lt;/title&gt;
&lt;script type="text/javascript" src="/js/jquery-1.4.min.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="/js/jquery.cycle.all.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="/js/jquery-print.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="/js/jquery.batchImageLoad.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="/js/jquery.doubletap-0.1.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="/js/fg.menu.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="/js/showoff.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="/js/jTypeWriter.js"&gt; &lt;/script&gt;
&lt;script type="text/javascript" src="/js/sh_main.min.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="/js/core.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="/js/showoffcore.js"&gt;&lt;/script&gt;
...</code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content bullets left incremental" ref="encapsulation/slidesE_encapsulation/4">
<p class="notes">blah</p>

<h1>Encapsulation Techniques</h1>

<ul>
<li>simple namespacing</li>
<li>private state with function closures</li>
<li>Module pattern combines these two</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="encapsulation/slidesE_encapsulation/5">
<h1>Namespacing</h1>

<h2>Avoid global vars</h2>

<pre class="sh_javaScript"><code>var COINS = {
    NICKEL : 5,
    DIME : 10,
    QUARTER : 25,
    isCoin : function(cents){
        return [this.NICKEL, this.DIME,
         this.QUARTER].contains(cents);
    }
};

result = COINS.NICKEL;</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="encapsulation/slidesE_encapsulation/6">
<p class="notes">closure, capture lexical scope, free variables</p>

<h1>Function Closures</h1>

<pre class="sh_javaScript"><code>var coinReturn = [25, 25, 10];

function isSufficientFunds(purchasePrice){
    var funds = 0;
    coinReturn.each(function(coin){
        funds+=coin;
    });
    return (funds &gt;= purchasePrice);
}</code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content" ref="encapsulation/slidesE_encapsulation/7">
<p class="notes">closure can persist beyond the life of the containing (outer) function</p>

<pre class="sh_javaScript"><code>
var func = function(){
    var coinReturn = [25, 25, 10];

    function isSufficientFunds(purchasePrice){
        var funds = 0;
        coinReturn.each(function(coin){
            funds+=coin;
        });
        return (funds &gt;= purchasePrice);
    }
    return isSufficientFunds;
}();

CORE.out(func(20));
CORE.out(func.coinReturn);</code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content smaller" ref="encapsulation/slidesE_encapsulation/8">
<p class="notes">accomplishes both: namespacing, private state
.notes doesn't completely prevent tampering, but can preserve invariants</p>

<h1>A Module</h1>

<pre class="sh_javaScript"><code>var ACM = function(){
    var coinReturn = [];
    var coins = [];

    var doPurchase = function(purchasePrice){
        if (ifSufficientFunds(purchasePrice)){
            // ...
        }
    };
    //...
    return {
        deposit : function(coin){
            coinReturn.push(coin);
        },
        purchase : function(purchasePriceInCents){
            return doPurchase(purchasePriceInCents);
        }
        //...
    };
}();</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="encapsulation/slidesE_encapsulation/9">
<p class="notes">canonical example of module</p>

<h1>The Module Pattern</h1>

<pre class="sh_javaScript"><code>var MODULE = function(){
    var private state = //...

    var privateMethod = function(arg){
        // ...
    };

    return {
        publicMethod : function(arg){
            privateMethod(arg);
        },
    };
}();</code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content" ref="encapsulation/slidesE_encapsulation/10">
<p class="notes">import another module - theoretically there's a runtime advantage</p>

<h1>Slight Variation</h1>

<pre class="sh_javaScript"><code>var MODULE = function(anotherModule){
    var private state = //...

    var privateMethod = function(arg){
        anotherModule.doSomething();
        // ...
    };

    return {
        publicMethod : function(arg){
            privateMethod(arg);
        },
    };
}(ANOTHER_MODULE);</code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content" ref="encapsulation/slidesE_encapsulation/11">
<p class="notes">import another module - theoretically there's a runtime advantage</p>

<h1>Another Variation</h1>

<pre class="sh_javaScript"><code>(function(module){
    var private state = //...

    var privateMethod = function(arg){
        // ...
    };

    module.publicMethod = function(arg){
        privateMethod(arg);
    };
}(ANOTHER_MODULE));</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="encapsulation/slidesE_encapsulation/12">
<h1>My Core Module</h1>

<pre class="sh_javaScript"><code>var CORE = function(){
    // stuff omitted...
    return {
        out : function(output){
            //implemented by env
        },
        require : function(toImport){
            this.out(
             "'require' not implemented!");
        }
    };
}();</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="encapsulation/slidesE_encapsulation/13">
<h1>Core module</h1>

<h2>modified for Showoff</h2>

<pre class="sh_javaScript"><code>(function(CORE){

    CORE.require = function(toImport){
        //nothing to do
    };
    CORE.out = function(output){
        result = result || '';
        result = result + '&lt;p&gt;' + output + '&lt;/p&gt;';
    };

    return CORE;
}(CORE));</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="encapsulation/slidesE_encapsulation/14">
<h1>Core module</h1>

<h2>modified for Mozilla Rhino</h2>

<pre class="sh_javaScript"><code>(function(CORE){
    // ...
    CORE.require = function(toImport){
        // load from src or testsrc
    };
    CORE.out = function(output){
        // Rhino-specific!
        print('\n'+output);
    };

    return CORE;
}(CORE));</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="encapsulation/slidesE_encapsulation/15">
<p class="notes">unlike other languages, there is no nesting of scope in blocks, only in function bodies</p>

<h1>Key Point</h1>

<ul>
<li>Functions are the <i>only</i> means of nesting scope</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="inheritance/slidesA_prototype/1">
<h1>Prototype</h1></div>
</div><div class="slide" data-transition="fade"><div class="content bullets incremental" ref="inheritance/slidesA_prototype/2">
<p class="notes">blah</p>

<h1>JavaScript Prototypes</h1>

<ul>
<li>All objects have a <em>hidden</em> link to a prototype</li>
<li>If not specified, defaults to the prototype belonging to Object constructor</li>
<li>All functions have a ".prototype" property, which is used to set the prototype link of any objects
created by calling that function as a constructor</li>
</ul>
</div>
</div><div class="slide" data-transition="scrollUp"><div class="content execute" ref="inheritance/slidesA_prototype/3">
<p class="notes">built-in constructor functions: Object, Array, String, Boolean, Number, Function, RegExp</p>

<h1>built-in constructors</h1>

<pre class="sh_javaScript"><code>CORE.out(typeof Object);
CORE.out(typeof Object.prototype);
CORE.out(typeof Function);
CORE.out(typeof String);
CORE.out(typeof Array);
CORE.out(typeof RegExp);
CORE.out(typeof Number);</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="inheritance/slidesA_prototype/4">
<p class="notes">modify Object prototype</p>

<h1>prototype</h1>

<h2>changes to prototype inherited by all instances</h2>

<pre class="sh_javaScript"><code>delete Object.prototype.foo;

var obj = new Object();

CORE.out(obj.foo);

Object.prototype.foo = function(){
    return "I am an object.";
};
CORE.out(obj.foo());</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content execute" ref="inheritance/slidesA_prototype/5">
<p class="notes">adding to obj does not affect obj's prototype</p>

<h1>prototype</h1>

<h2>modifying 'obj' does not affect prototype</h2>

<pre class="sh_javaScript"><code>Object.prototype.foo = 2112;

var obj = new Object();
CORE.out(obj.foo);

obj.foo = 42;
CORE.out(obj.foo);
CORE.out(Object.prototype.foo);

delete Object.prototype.foo;
CORE.out(obj.foo);</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="inheritance/slidesA_prototype/6">
<h1>Extending the Language</h1>

<pre class="sh_javaScript"><code>Function.prototype.method
               = function (name, func) {
    if (!this.prototype[name]){
        this.prototype[name] = func;
        return this;
    }
};
Array.method('each', function(f, index){
    for (var i=0; i&lt;this.length; i++){
        f(this[i], i);
    }
});

[2,3,5].each(function(item){CORE.out(item);});</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="inheritance/slidesB_inheritance/1">
<h1>Inheritance Idioms</h1></div>
</div><div class="slide" data-transition="none"><div class="content" ref="inheritance/slidesB_inheritance/2">
<h1>Pseudoclassical Inheritance</h1>

<pre class="sh_javaScript"><code>// a constructor aka pseudo-class
var Core = function(){
    this.name = "abstract core";
};
Core.prototype.out = function(output){
    alert(this.name + ": " + output);
};
Core.prototype.require = function(import){
    this.out("require: " + import);
};

var core = new Core();
core.out("foo");
core.require("jQuery.core.js");</code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content" ref="inheritance/slidesB_inheritance/3">
<pre class="sh_javaScript"><code>var Core = function(){this.name = "abstract core";};Core.prototype.out = function(output){alert(this.name + ": " + output);};Core.prototype.require = function(import){this.out("require: " + import);};
var ShowoffCore = function(){
    this.name = "Showoff";
};
ShowoffCore.prototype = new Core();
ShowoffCore.prototype.out=function(output){
    result = result || '';
    result = result+'&lt;p&gt;'+output+'&lt;/p&gt;';
};

var core = new ShowoffCore();
core.out("foo");
core.require("jQuery.core.js");</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content bullets" ref="inheritance/slidesB_inheritance/4">
<h1>Key Point</h1>

<ul>
<li>An object's hidden prototype link can <em>only</em> be set by using the new operator</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content" ref="inheritance/slidesB_inheritance/5">
<h1>Prototypal Inheritance</h1>

<pre class="sh_javaScript"><code>var factory = function(o){
    var F = function(){};
    F.prototype = o;
    return new F();
};</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="inheritance/slidesB_inheritance/6">
<h1>Prototypal Inheritance</h1>

<pre class="sh_javaScript"><code>Object.create = function(o){
    var F = function(){};
    F.prototype = o;
    return new F();
};</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="inheritance/slidesB_inheritance/7">
<h1>Prototypal Inheritance</h1>

<pre class="sh_javaScript"><code>Object.create = function(o){
    var F = function(){};
    F.prototype = o;
    return new F();
};
Object.mixin = function(obj,mixin){
    for (name in mixin){
        if (mixin.hasOwnProperty(name)){
            obj[name] = mixin[name];
        }
    }
    return obj;
};</code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content" ref="inheritance/slidesB_inheritance/8">
<pre class="sh_javaScript"><code>var coreProto = {
    name : 'core',
    out : function(output){
        alert(this.name + ": " + output);
    },
    require : function(import){
        this.out("require: " + import);
    }
}
var showoffProto = Object.create(coreProto);
showoffProto.name = 'showoff';
showoffProto.out = function(output){
    result = result || '';
    result = result + '&lt;p&gt;' + this.name;
    result = result + ":" + output+'&lt;/p&gt;';
}

var showoff1 = Object.create(showoffProto);
showoff1.require("jQuery.js");</code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content" ref="inheritance/slidesB_inheritance/9">
<pre class="sh_javaScript"><code>var coreProto = {
    name : 'core',
    out : function(output){
        alert(this.name + ": " + output);
    },
    require : function(import){
        this.out("require: " + import);
    }
}
var showoffProto =
Object.mixin(Object.create(coreProto), {
    name : 'showoff',
    out : function(output){
        result=result || '';
        result=result+'&lt;p&gt;'+this.name;
        result=result+":"+output+'&lt;/p&gt;';
    }
});
var showoff1 = Object.create(showoffProto);
showoff1.require("jQuery.js");</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="inheritance/slidesB_inheritance/10">
<h1>Functional Inheritance</h1>

<h2>Combine prototypal inheritance with encapsulation</h2>

<pre class="sh_javaScript"><code>var constructor = function(prototype){
    var a, b; // secret stuff

    var publicMethod = function(){
        // accesses secret stuff
    };

    return Object.mixin(
      Object.create(prototype),
      {'publicMethod':publicMethod}
      );
};</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content subsection" ref="conclusion/slidesA/1">
<h1>The Wrap-Up</h1></div>
</div><div class="slide" data-transition="none"><div class="content" ref="conclusion/slidesA/2">
<h1>jQuery</h1>

<pre class="sh_javaScript"><code>$('div.clickable').click(function(){
    $(this).attr('class', 'clicked');
});</code></pre></div>
</div><div class="slide" data-transition="scrollUp"><div class="content" ref="conclusion/slidesA/3">
<h1>jQuery core.js module</h1>

<pre class="sh_javaScript"><code>(function() {

    // Define a local copy of jQuery
    var jQuery = function( selector, context ) {
            // The jQuery object is just the
            // init constructor 'enhanced'
            return new jQuery.fn.init(
                       selector, context );
        },

    // ...900+ lines later

    // Expose jQuery to the global object
    window.jQuery = window.$ = jQuery;
})();</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content bullets" ref="conclusion/slidesA/4">
<h1>Links</h1>

<ul>
<li><a href="http://www.crockford.com/">Douglas Crockford</a></li>
<li><a href="http://www.amazon.com/exec/obidos/ASIN/0596517742">JavaScript: The Good Parts</a></li>
<li><a href="http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth">The Module Pattern</a></li>
<li><a href="http://github.com/jquery">jQuery</a></li>
<li>slides by <a href="http://github.com/schacon/showoff">showoff</a></li>
<li><a href="http://github.com/scottbale">http://github.com/scottbale</a></li>
</ul>
</div>
</div>
</div>

</body>
</html>
